<MCard Width=510 Height=680 Class="mx-auto my-auto">
    <div style="height:60px;"></div>
    <div class="mt-2 mx-auto text-center" style="width:420px;">
        <MAvatar Size=80>
            <MImage Src="/img/avatar/1.svg">
            </MImage>
        </MAvatar>
        <h5 class="mt-2 mb-12">Welcome to EHP Portal 👋</h5>

        <MTextField @bind-Value="_email"
                    TValue="string"
                    Label="Email"
                    Placeholder="john@example.com"
                    Outlined
                    Class="mb-6"
                    HideDetails="@("auto")">
        </MTextField>

        <MTextField @bind-Value="_password"
                    TValue="string"
                    Label="Password"
                    Class="mb-6"
                    Type="@(_show ? "text" : "password")"
                    Outlined
                    HideDetails="@("auto")"
                    AppendIcon="@(_show ? "mdi-eye" : "mdi-eye-off")"
                    OnAppendClick="() => _show = !_show">
        </MTextField>

        <div class="d-flex align-center justify-center mb-6" style="gap: 20px;">
            <div style="flex: 1;">
                <MTextField @bind-Value="CaptchaInput"
                            Label="Enter Code"
                            Outlined
                            HideDetails="@("auto")">
                </MTextField>
            </div>
            <div class="d-flex align-center justify-center" style="min-width: 160px; height: 70px; border: 2px solid #e0e0e0; border-radius: 8px; background: #f9f9f9; padding: 8px;">
                <img src="@CaptchaImageUrl" @onclick="GenerateCaptcha" style="cursor:pointer; max-height: 55px; max-width: 140px; border-radius: 4px;" alt="Captcha" title="Click to refresh" />
            </div>
        </div>

        <div class="d-flex align-center justify-space-between flex-wrap">
            <MCheckbox @bind-Value="_remember" Label="Remember me" Dense></MCheckbox>
            <a class="body-2 text-decoration-none" href="@ForgotPasswordRoute">
                Forgot Password?
            </a>
        </div>

        @if (!string.IsNullOrEmpty(_errorMessage))
        {
            <MAlert Type="AlertTypes.Error" Class="my-4">@_errorMessage</MAlert>
        }

        <MButton Class="mt-11 rounded-4 text-btn white--text" 
                 @onclick="HandleLogin" 
                 Height=46 
                 Width=340 
                 Color="primary"
                 Loading="_isLoading"
                 Disabled="_isLoading">
            @if (_isLoading)
            {
                <MProgressCircular Size="20" Color="white" Indeterminate />
                <span class="ml-2">Logging in...</span>
            }
            else
            {
                @:Login
            }
        </MButton>


    </div>
</MCard>
