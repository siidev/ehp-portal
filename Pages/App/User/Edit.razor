@page "/app/user/edit"
@page "/app/user/edit/{Id}"
@inherits ProComponentBase

<MCard>
<MCardText Class="px-6 pb-6">
<MTabs @bind-Value="tab" HideSlider Height=10 Color="sample-green">
    <MTab Value="@("Account")">
        <MIcon Size=16 Color="@(tab == "Account" ? "sample-green" : "fill")">mdi-circle</MIcon>
        <span class="ml-2 text-btn @(tab == "Account" ? "neutral--text" : "")">Account</span>
    </MTab>
    <MTab Class="ml-2" Value="@("Information")">
        <MIcon Size=16 Color="@(tab == "Information" ? "sample-green" : "fill")">mdi-circle</MIcon>
        <span class="ml-2 text-btn @(tab == "Information" ? "neutral--text" : "")">Information</span>
    </MTab>
    <MTab Class="ml-2" Value="@("Social")">
        <MIcon Size=16 Color="@(tab == "Social" ? "sample-green" : "fill")">mdi-circle</MIcon>
        <span class="ml-2 text-btn @(tab == "Social" ? "neutral--text" : "")">Social</span>
    </MTab>
</MTabs>
<MTabsItems @bind-Value="tab" Class="mt-4">
<MTabItem Value="@("Account")">
    <div class="d-flex block-center mt-3">
        @if (string.IsNullOrEmpty(UserData.HeadImg))
        {
            string color = UserData.Color;
            <MAvatar Size="120" Color="@($"{color}-lighten-5")">
                <span class="@($"{color}--text text-h3")">@UserData.SampleName</span>
            </MAvatar>
        }
        else
        {
            <MAvatar Size="120">
                @*<MImage Contain Src="@UserData.HeadImg" />*@
                <img src="@UserData.HeadImg" />
            </MAvatar>
        }
        <div Class="ml-6">
            <h5 class="mb-6">@UserData.FullName</h5>
            <MButton Color="primary" MinWidth=80 Height=32 Class="rounded-pill"> Update </MButton>
            <MButton Outlined MinWidth=80 Height=32 Class="ml-6 text-btn rounded-pill"> Remove </MButton>
        </div>
    </div>
    <MRow Class="my-3">
        <MCol Md=4 Sm=12>
            <MTextField @bind-Value="UserData.UserName" Color="primary" Label="UserName" HideDetails="@("auto")" Outlined />
        </MCol>
        <MCol Md=4 Sm=12>
            <MTextField @bind-Value="UserData.FullName" Color="primary" Label="FullName" HideDetails="@("auto")" Outlined />
        </MCol>
        <MCol Md=4 Sm=12>
            <MTextField @bind-Value="UserData.Email" Color="primary" Label="Email" HideDetails="@("auto")" Outlined />
        </MCol>
    </MRow>
    <MRow>
        <MCol Md=4 Sm=12>
            <MSelect @bind-Value="UserData.Status"
                     Color="primary"
                     HideDetails="@("auto")"
                     Outlined
                     Items="@UserService.GetStatusList()"
                     ItemText="u => u"
                     ItemValue="u => u"
                     Label="Status">
            </MSelect>
        </MCol>
        <MCol Md=4 Sm=12>
            <MSelect @bind-Value="UserData.Role"
                     Color="primary"
                     HideDetails="@("auto")"
                     Outlined
                     Items="@UserService.GetRoleList()"
                     ItemText="u => u"
                     ItemValue="u => u"
                     Label="Role">
            </MSelect>
        </MCol>
        <MCol Md=4 Sm=12>
            <MTextField @bind-Value="UserData.Company" Color="primary" Label="Company" HideDetails="@("auto")" Outlined />
        </MCol>
    </MRow>

    <div class="mt-12 mb-3">
        <MIcon Size=20 Color="sample-green" Class="mt-n1">mdi-apps</MIcon>
        <span class="ml-1 text-h6">Application Access</span>
    </div>
    <MRow>
        @foreach (var app in _allApplications)
        {
            <MCol Md=4 Sm=12>
                <MCheckbox @bind-Value="_userAppAccess[app.Id]" Label="@app.Name" />
            </MCol>
        }
    </MRow>
</MTabItem>

<MTabItem Value="@("Information")">
    <div class="mt-3">
        <MIcon Size=20 Color="sample-green" Class="mt-n1">fa:far fa-user</MIcon>
        <span class="ml-1 text-h6">Personal Information</span>
    </div>

    <MRow Class="mt-3">
        <MCol Md=4 Sm=12>
            <MMenu CloseOnContentClick="false" NudgeRight="40" Transition="scale-transition" OffsetY MinWidth="@("auto")" @bind-Value="_birthDateMenu">
                <ActivatorContent Context="menuContext">
                    <MTextField @bind-Value=UserData.BirthDate Label="BirthDate" Color="primary" Readonly HideDetails="@("auto")" Outlined @attributes="menuContext.Attrs"></MTextField>
                </ActivatorContent>
                <ChildContent>
                    <MDatePicker Class="task-datepicker" @bind-Value=UserData.BirthDate OnInput="() => _birthDateMenu = false"></MDatePicker>
                </ChildContent>
            </MMenu>
        </MCol>
        <MCol Md=4 Sm=12>
            <MTextField @bind-Value="UserData.Mobile" Label="Mobile" Color="primary" HideDetails="@("auto")" Outlined />
        </MCol>
        <MCol Md=4 Sm=12>
            <MTextField @bind-Value="UserData.Website" Label="Website" Color="primary" HideDetails="@("auto")" Outlined />
        </MCol>
    </MRow>

    <MRow Class="mt-3">
        <MCol Md=4 Sm=12>
            <MSelect @bind-Value="UserData.Language"
                     Color="primary"
                     Outlined
                     HideDetails="@("auto")"
                     Items="@UserService.GetLanguageList()"
                     ItemText="u => u"
                     ItemValue="u => u"
                     Label="Language">
            </MSelect>
        </MCol>
        <MCol Md=4 Sm=12>
            <span class="text-btn">Gender</span>
            <MRadioGroup @bind-Value="UserData.Gender" HideDetails="@("auto")" Color="primary" Row Class="mt-1">
                <MRadio Color="primary" Label="Male" Value="@("Male")"></MRadio>
                <MRadio Color="primary" Label="Female" Value="@("Female")"></MRadio>
            </MRadioGroup>
        </MCol>
        <MCol Md=4 Sm=12>
            <span class="text-btn">Contact Options</span>
            <div class="d-flex mt-n2">
                <MCheckbox Label="Email" HideDetails="@("auto")" Color="primary" TValue="bool"></MCheckbox>
                <MCheckbox Label="Message" HideDetails="@("auto")" Color="primary" TValue="bool" Class="ml-2"></MCheckbox>
                <MCheckbox Label="Phone" HideDetails="@("auto")" Color="primary" TValue="bool" Class="ml-2"></MCheckbox>
            </div>

        </MCol>
    </MRow>

    <div class="mt-12">
        <MIcon Size=20 Color="sample-green" Class="mt-n1">mdi-map-marker-outline</MIcon>
        <span class="text-h6">Address</span>
        <MRow Class="mt-3">
            <MCol Md=4 Sm=12>
                <MTextField @bind-Value="UserData.Address1" Label="Address Line 1" Color="primary" HideDetails="@("auto")" Outlined />
            </MCol>
            <MCol Md=4 Sm=12>
                <MTextField @bind-Value="UserData.Address2" Label="Address Line 2" Color="primary" HideDetails="@("auto")" Outlined />
            </MCol>
            <MCol Md=4 Sm=12>
                <MTextField @bind-Value="UserData.Address3" Label="Address Line 3" Color="primary" HideDetails="@("auto")" Outlined />
            </MCol>
        </MRow>
        <MRow Class="mt-3">
            <MCol Md=4 Sm=12>
                <MTextField @bind-Value="UserData.City" Label="City" Color="primary" HideDetails="@("auto")" Outlined />
            </MCol>
            <MCol Md=4 Sm=12>
                <MTextField @bind-Value="UserData.State" Label="State" Color="primary" HideDetails="@("auto")" Outlined />
            </MCol>
            <MCol Md=4 Sm=12>
                <MTextField @bind-Value="UserData.Country" Label="Country" Color="primary" HideDetails="@("auto")" Outlined />
            </MCol>
        </MRow>
    </div>
</MTabItem>

<MTabItem Value="@("Social")">
    <MRow class="mt-1">
        <MCol Md=4 Sm=12>
            <MTextField @bind-Value="UserData.Twitter" Label="Twitter" Color="primary" HideDetails="@("auto")" Outlined PrependInnerIcon="fa:fab fa-twitter" />
        </MCol>
        <MCol Md=4 Sm=12>
            <MTextField @bind-Value="UserData.Facebook" Label="Facebook" Color="primary" HideDetails="@("auto")" Outlined PrependInnerIcon="mdi-facebook" />
        </MCol>
        <MCol Md=4 Sm=12>
            <MTextField @bind-Value="UserData.Instagram" Label="Instagram" Color="primary" HideDetails="@("auto")" Outlined PrependInnerIcon="fa:fab fa-instagram" />
        </MCol>
    </MRow>
    <MRow Class="mt-3">
        <MCol Md=4 Sm=12>
            <MTextField @bind-Value="UserData.Github" Label="Github" Color="primary" HideDetails="@("auto")" Outlined PrependInnerIcon="fa:fab fa-github" />
        </MCol>
        <MCol Md=4 Sm=12>
            <MTextField @bind-Value="UserData.Codepen" Label="Codepen" Color="primary" HideDetails="@("auto")" Outlined PrependInnerIcon="fa:fab fa-codepen" />
        </MCol>
        <MCol Md=4 Sm=12>
            <MTextField @bind-Value="UserData.Slack" Label="Slack" Color="primary" HideDetails="@("auto")" Outlined PrependInnerIcon="fa:fab fa-slack" />
        </MCol>
    </MRow>
</MTabItem>
</MTabsItems>

<div class="mt-10 d-flex">
    <MSpacer></MSpacer>
    <MButton MinWidth=80 Height=40 Outlined Class="text-btn rounded-pill"> Reset </MButton>
    <MButton MinWidth=80 Height=40 Color="primary" Class="ml-6 rounded-pill" OnClick="HandleSaveChanges"> Save Changes </MButton>
</div>
</MCardText>
</MCard>

@code {

}
